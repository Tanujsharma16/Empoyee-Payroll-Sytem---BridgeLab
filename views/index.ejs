<!DOCTYPE html>
<html>
<head>
    <title>Employee Payroll</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/style.css">

    <!-- Font Awesome -->
    <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

<div class="dashboard">

    <!-- TOP BAR -->
    <div class="header">
        <h2>Employee Details</h2>
        <div class="header-right">
            <input type="text" id="searchInput"
                   placeholder="Search employee..."
                   onkeyup="searchEmployee()">
            <a href="/add" class="add-btn">+ Add User</a>
        </div>
    </div>

    <!-- SUMMARY CARDS -->
    <div class="summary">
        <div class="card">
            <i class="fa-solid fa-users icon"></i>
            <div>
                <p>Total Employees</p>
                <h3><%= employees.length %></h3>
            </div>
        </div>

        <div class="card">
            <i class="fa-solid fa-building icon"></i>
            <div>
                <p>Departments</p>
                <h3>2</h3>
            </div>
        </div>

        <div class="card">
            <i class="fa-solid fa-indian-rupee-sign icon"></i>
            <div>
                <p>Total Salary</p>
                <h3>₹77,331</h3>
            </div>
        </div>
    </div>

    <!-- TABLE -->
    <table>
        <tr>
            <th>Name</th>
            <th>Gender</th>
            <th>Department</th>
            <th>Salary</th>
            <th>Start Date</th>
            <th>Actions</th>
        </tr>

        <% employees.forEach(emp => { %>
        <tr>
            <td><%= emp.name %></td>
            <td><%= emp.gender %></td>
            <td><%= emp.position %></td>
            <td>₹<%= emp.salary %></td>
            <td><%= emp.DateOfJoining %></td>
            <td>
                <a href="/edit/<%= emp.id %>" class="action-btn edit">
                    <i class="fa-solid fa-pen"></i>
                </a>
                <a href="/delete/<%= emp.id %>" class="action-btn delete">
                    <i class="fa-solid fa-trash"></i>
                </a>
            </td>
        </tr>
        <% }) %>
    </table>

</div>

<!-- Search Script -->
<script>
function searchEmployee() {
    let input = document.getElementById("searchInput").value.toLowerCase();
    let rows = document.querySelectorAll("table tr");

    for (let i = 1; i < rows.length; i++) {
        let text = rows[i].innerText.toLowerCase();
        rows[i].style.display = text.includes(input) ? "" : "none";
    }
}
</script>

</body>
</html>
